"use strict";var e=require("postcss"),r=require("rtlcss");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o,n,i,a=t(e),s=t(r),l=function(){return l=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e},l.apply(this,arguments)};function c(e,r,t){if(t||2===arguments.length)for(var o,n=0,i=r.length;n<i;n++)!o&&n in r||(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))}!function(e){e.combined="combined",e.override="override"}(o||(o={})),function(e){e.ltr="ltr",e.rtl="rtl"}(n||(n={})),function(e){e.disabled="disabled",e.flexible="flexible",e.strict="strict"}(i||(i={}));var d,u,f=/rtl:/,p=/rtl:ignore/,b=/^\/\*!? *rtl:?(begin|end)?:(\w+):?([^*]*?) *\*\/$/,m=/(right|left)/i,g=/^(html)(?=\W|$)/,v=/(:root)(?=\W|$)/,h=/[.?*+^$[\]\\(){}|-]/g,y=/\w$/;!function(e){e.IGNORE="ignore",e.RENAME="rename",e.SOURCE="source",e.RAW="raw"}(d||(d={})),function(e){e.BEGIN="begin",e.END="end"}(u||(u={}));var R=new RegExp("$-^"),k=[{name:"left-right",search:["left","Left","LEFT"],replace:["right","Right","RIGHT"]},{name:"ltr-rtl",search:["ltr","Ltr","LTR"],replace:["rtl","Rtl","RTL"]}],x=function(e){if(e.name)return e.name;var r=Array.isArray(e.search)?e.search[0]:e.search,t=Array.isArray(e.replace)?e.replace[0]:e.replace,o=/[^\w]/g;return r.replace(o,"-")+"-"+t.replace(o,"_")},E=function(e){return e.map((function(e){return{name:x(e),priority:100,search:e.search,replace:e.replace,options:{scope:"*",ignoreCase:!1}}}))},w=Object.keys(o).map((function(e){return o[e]})),P=Object.keys(n).map((function(e){return n[e]})),A=Object.keys(i).map((function(e){return i[e]})),O=function(e){return"string"!=typeof e&&!Array.isArray(e)||!!Array.isArray(e)&&e.some((function(e){return"string"!=typeof e}))},M=function(e,r){return"string"==typeof r?c(c([],e,!0),[r],!1):c(c([],e,!0),r,!0)},j=function(){return{mode:o.combined,ltrPrefix:'[dir="ltr"]',rtlPrefix:'[dir="rtl"]',bothPrefix:"[dir]",safeBothPrefix:!1,ignorePrefixedRules:!0,source:n.ltr,processUrls:!1,processKeyFrames:!1,processEnv:!0,useCalc:!1,stringMap:E(k),autoRename:i.disabled,greedy:!1,aliases:{}}},N={options:l({},j()),keyframes:[],keyframesStringMap:{},keyframesRegExp:R,rules:[],rulesAutoRename:[],rulesPrefixRegExp:R},S=function(e){var r,t=l({},j());(e.mode&&w.includes(e.mode)&&(t.mode=e.mode),e.source&&P.includes(e.source)&&(t.source=e.source),e.autoRename&&A.includes(e.autoRename)&&(t.autoRename=e.autoRename),"boolean"==typeof e.ignorePrefixedRules&&(t.ignorePrefixedRules=e.ignorePrefixedRules),"boolean"==typeof e.greedy&&(t.greedy=e.greedy),O(e.ltrPrefix)||(t.ltrPrefix=e.ltrPrefix),O(e.rtlPrefix)||(t.rtlPrefix=e.rtlPrefix),O(e.bothPrefix)||(t.bothPrefix=e.bothPrefix),"boolean"==typeof e.safeBothPrefix&&(t.safeBothPrefix=e.safeBothPrefix),"boolean"==typeof e.processUrls&&(t.processUrls=e.processUrls),"boolean"==typeof e.processKeyFrames&&(t.processKeyFrames=e.processKeyFrames),"boolean"==typeof e.processEnv&&(t.processEnv=e.processEnv),"boolean"==typeof e.useCalc&&(t.useCalc=e.useCalc),function(e){return!Array.isArray(e)||e.some((function(e){return typeof e.search!=typeof e.replace||O(e.search)||O(e.replace)||Array.isArray(e.search)&&Array.isArray(e.replace)&&e.search.length!==e.replace.length}))}(e.stringMap))||E(e.stringMap).forEach((function(e){e.name===k[0].name?t.stringMap.splice(0,1,e):e.name===k[1].name?t.stringMap.splice(1,1,e):t.stringMap.push(e)}));return e.aliases&&(r=e.aliases,!Object.entries(r).some((function(e){return"string"!=typeof e[1]})))&&(t.aliases=e.aliases),t},I=function(e){N.options=S(e),N.keyframes=[],N.keyframesStringMap={},N.keyframesRegExp=R,N.rules=[],N.rulesAutoRename=[],N.rulesPrefixRegExp=function(e){var r=e.ltrPrefix,t=e.rtlPrefix,o=e.bothPrefix;if(!e.ignorePrefixedRules)return R;var n=[];return n=M(n,r),n=M(n,t),n=(n=M(n,o)).map((function(e){var r=e.replace(h,"\\$&");return y.test(e)?r+"(?:\\W|$)":r})),new RegExp("("+n.join("|")+")")}(N.options)},C=function(){var e,r;N.keyframesStringMap=(e=N.keyframes,r={},e.forEach((function(e){r[e.atRuleParams]={name:e.atRule.params,nameFlipped:e.atRuleFlipped.params}})),r),N.keyframesRegExp=function(e){return new RegExp("(^|[^\\w-]| )("+Object.keys(e).join("|")+")( |[^\\w-]|$)","g")}(N.keyframesStringMap)},G=Object.values(d),B=Object.values(u),F=function(e){var r=e.toString().match(b);if(r&&function(e){return G.includes(""+e[2])&&(void 0===e[1]||B.includes(""+e[1]))}(r)){var t={directive:r[2]};return r[1]&&(t.block=r[1]),r[3]&&(t.option=r[3]),t}return null},L=function(e,r){return e.directive===d.IGNORE&&!e.block&&r[d.IGNORE]&&r[d.IGNORE].block===u.BEGIN},U=function(e,r){var t=e[r];if(t){var o=t.block;if(o!==u.BEGIN&&delete e[r],o!==u.END)return!0}return!1},$=function(e,r){var t=e[d.SOURCE],o=U(e,d.SOURCE);return t&&o?t.option:r||void 0},T=function(e,r,t,o){e.each((function(e){if("comment"===e.type||r.includes(e.type))if("comment"===e.type){var n=e,i=F(n);i&&t(n,i)}else o(e)}))},W=/^-\w+-/,K=function(e){return e.replace(W,"")},q=function(e,r){return g.test(r)?r.replace(g,"$1"+e):v.test(r)?r.replace(v,e+"$1"):e+" "+r},D=function(e,r){e.selectors="string"==typeof r?e.selectors.map((function(e){return N.rulesPrefixRegExp.test(e)?e:q(r,e)})):e.selectors.reduce((function(e,t){return e=N.rulesPrefixRegExp.test(t)?c(c([],e,!0),[t],!1):e.concat(r.map((function(e){return q(e,t)})))}),[])},z=function(e){return!!e.selectors.find((function(e){return N.rulesPrefixRegExp.test(e)}))},H=function(e){return e.some((function(e){return"decl"===e.type||"rule"===e.type&&H(e)||"atrule"===e.type&&H(e)}))},_=function(e,r,t){if(function(e){return e.some((function(e){return"decl"===e.type}))}(r)){var o;for(t=c([],t,!0);t.length;){o=t.shift();var n=e.nodes.find((function(e){if("rule"===e.type&&e.selector===o.selector)return!0}));n?o=n:(o=o.clone().removeAll(),e.append(o)),e=o}e.append(r)}},J=function(e,r,t,i,a){var s={rule:e,ruleLTR:r,ruleRTL:t,ruleBoth:i,ruleSafe:a};return function(e,r,t,i){var a=N.options,s=a.mode,l=a.ltrPrefix,c=a.rtlPrefix,d=a.bothPrefix,u=a.source;s===o.combined?(D(e,u===n.ltr?l:c),D(r,u===n.rtl?l:c)):(D(e,u===n.ltr?c:l),D(r,u===n.rtl?c:l)),D(t,d),D(i,d)}(r,t,i,a),N.rules.push(s),s},Q=function(e,r,t,o,n){var i=function(e){for(var r=[];"rule"===e.type;)r.push(e),e=e.parent;return r.shift(),r.reverse()}(e),a=i.shift(),s=N.rules.find((function(e){return e.rule===a}));if(!s){var l=a.clone().removeAll(),c=l.clone(),d=l.clone(),u=l.clone();s=J(a,l,c,d,u)}!function(e,r,t,o,n,i){_(n.ruleLTR,e,i),_(n.ruleRTL,r,i),_(n.ruleBoth,t,i),_(n.ruleSafe,o,i)}(r,t,o,n,s,i)},V=function(e){e&&"rule"===e.type&&(e.raws.before="\n\n"+(e.raws.before?e.raws.before.replace(/\n/g,""):""))},X=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.forEach((function(e){var r=e.prev();r&&"comment"!==r.type&&V(e),e.walk((function(e){if("decl"===e.type){var r=e;r.raws&&r.raws.value&&f.test(r.raws.value.raw)&&(delete r.raws.value,r.value=r.value.trim())}}))}))},Y=function(e){H(e)?e.walkRules((function(e){Y(e),H(e)||e.remove()})):e.remove()},Z={animation:{overridden:null,overrides:["animation-direction","animation-duration","animation-delay","animation-name","animation-fill-mode","animation-iteration-count","animation-play-state","animation-timing-function"]},background:{overridden:null,overrides:["background-attachment","background-clip","background-color","background-image","background-repeat","background-size"]},"background-position":{overridden:"background",overrides:["background-position-x","background-position-y"]},border:{overridden:null,overrides:[]},"border-bottom":{overridden:"border",overrides:["border-bottom-color","border-bottom-style","border-bottom-width"]},"border-left":{overridden:"border",overrides:["border-left-color","border-left-style","border-left-width"]},"border-right":{overridden:"border",overrides:["border-right-color","border-right-style","border-right-width"]},"border-top":{overridden:"border",overrides:["border-top-color","border-top-style","border-top-width"]},"border-color":{overridden:"border",overrides:["border-bottom-color","border-left-color","border-right-color","border-top-color"]},"border-style":{overridden:"border",overrides:["border-bottom-style","border-left-style","border-right-style","border-top-style"]},"border-width":{overridden:"border",overrides:["border-bottom-width","border-left-width","border-right-width","border-top-width"]},"border-radius":{overridden:null,overrides:["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius"]},margin:{overridden:null,overrides:["margin-bottom","margin-left","margin-top","margin-right"]},padding:{overridden:null,overrides:["padding-bottom","padding-left","padding-top","padding-right"]},transition:{overridden:null,overrides:["transition-delay","transition-duration","transition-property","transition-timing-function"]}},ee=["box-shadow","clear","cursor","direction","float","left","right","text-align","text-align-last","text-shadow","transform","transform-origin"],re={0:["border-bottom-right-radius","border-bottom-left-radius","border-end-end-radius","border-end-start-radius","border-start-end-radius","border-start-start-radius","border-top-left-radius","border-top-right-radius","margin-block-end","margin-block-start","margin-top","margin-right","margin-bottom","margin-left","margin-inline-end","margin-inline-start","padding-block-end","padding-block-start","padding-top","padding-right","padding-bottom","padding-left","padding-inline-end","padding-inline-start","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-top","scroll-margin-right","scroll-margin-bottom","scroll-margin-left","scroll-margin-inline-end","scroll-margin-inline-start"],auto:["top","right","bottom","left","grid-column-end","grid-column-start","grid-row-end","grid-row-start","inset-block-end","inset-block-start","inset-inline-end","inset-inline-start","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-top","scroll-padding-right","scroll-padding-bottom","scroll-padding-left","scroll-padding-inline-end","scroll-padding-inline-start"],currentcolor:["border-block-start-color","border-block-end-color","border-top-color","border-right-color","border-bottom-color","border-left-color","border-inline-start-color","border-inline-end-color"],medium:["border-block-start-width","border-block-end-width","border-top-width","border-right-width","border-bottom-width","border-left-width","border-inline-start-width","border-inline-end-width"],none:["border-block-start","border-block-end","border-top","border-right","border-bottom","border-left","border-top-style","border-right-style","border-bottom-style","border-left-style","border-block-start-style","border-block-end-style","border-inline-start","border-inline-end","border-inline-start-style","border-inline-end-style"]},te={},oe={},ne={},ie=function(e){var r=Z[e].overridden;return r?[r].concat(ie(r)):[]};Object.keys(Z).forEach((function(e){var r=ie(e);te[e]=r,Z[e].overrides.forEach((function(t){te[t]=[e].concat(r)}))})),Object.assign(oe,te),ee.forEach((function(e){oe[e]=[]})),Object.keys(re).forEach((function(e){re[e].forEach((function(r){ne[r]=e}))}));var ae=function(e,r){var t=e.clone(),o=e.prev();if(o&&"comment"===o.type){var n=o.clone();r.append(n),o.remove()}r.append(t)},se=function(e){var r=!!e.raws&&!!e.raws.value&&e.raws.value.raw;return!(!r||!p.test(r))},le=function(e,r,t,n){void 0===n&&(n=!1);var l=N.options,c=l.mode,u=l.source,f=l.safeBothPrefix,p=l.processUrls,b=l.processEnv,g=l.useCalc,v=l.stringMap,h=l.autoRename,y=l.greedy,R=l.aliases,k=[],x=e.clone().removeAll(),E=x.clone(),w=x.clone(),P=x.clone(),A=Array.prototype.reduce.call(e.nodes,(function(e,r){if("decl"===r.type){var t=r;e[t.prop]=t.value.trim()}return e}),{}),O=[],M=!1,j={};T(e,["decl"],(function(e,r){if(V(e.next()),e.remove(),r.directive===d.RAW&&r.option){var n=$(j,t),i=a.default.parse(r.option);c===o.combined&&!n||n&&(c===o.combined&&n===u||c!==o.combined&&n!==u)?E.append(i.nodes):x.append(i.nodes)}L(r,j)||(j[r.directive]=r)}),(function(e){if(!U(j,d.IGNORE)){var r=U(j,d.RENAME),n=e,l=n.toString()+";",S=s.default.process(l,{processUrls:p||r,processEnv:b,useCalc:g,stringMap:v,autoRename:h!==i.disabled,autoRenameStrict:h===i.strict,greedy:y,aliases:R}),I=a.default.parse(S).first;I.source=n.source,I.raws=n.raws;var C=n.prop.trim(),G=K(C),B=n.value.trim(),F="animation"===G||"animation-name"===G,L=I.prop.trim(),T=I.value.trim(),W=te[G],q=O.includes(G)||!!W&&W.some((function(e){return O.indexOf(e)>=0})),D=function(e,r){return r.some((function(r){return te[r]&&te[r].includes(e)}))}(G,O),z=!!f&&!!oe[G],H=$(j,t),_=!H||H===u;if(C!==L||B!==T||q||D||z||F)if(F)if(C!==L||B!==T||0!==N.keyframes.length&&N.keyframesRegExp.test(B)){var J=n.value.replace(N.keyframesRegExp,(function(e,r,t,o){return r+N.keyframesStringMap[t].name+o})),Q=n.value.replace(N.keyframesRegExp,(function(e,r,t,o){return r+N.keyframesStringMap[t].nameFlipped+o})),V=n.clone();if(c===o.combined)(X=n.clone()).value=J,V.value=Q,_?(x.append(X),E.append(V)):(x.append(V),E.append(X)),k.push(n);else n.value=J,V.value=Q,_?x.append(V):E.append(V),f&&(ae(n,P),k.push(n))}else f&&!se(n)&&(ae(n,P),k.push(n));else{if(C===L&&B===T)return void((q||z||D)&&!se(n)&&(ae(n,q||D?w:P),k.push(n)));if(A[I.prop]===T)return M=!0,void(z&&!se(n)&&(ae(n,P),k.push(n)));if(c===o.combined)_?(ae(n,x),E.append(I)):(ae(n,E),x.append(I)),k.push(n);else{var X;if(m.test(n.prop)&&!A[I.prop])(X=n.clone()).value=ne[n.prop]||"unset",_?x.append(X):E.append(X);z&&!se(n)&&(ae(n,P),k.push(n)),_?x.append(I):E.append(I)}O.push(G)}}})),k.length&&k.forEach((function(e){return e.remove()})),x.nodes.length||E.nodes.length||w.nodes.length||P.nodes.length?r?Q(e,x,E,w,P):J(e,x,E,w,P):h===i.disabled||M||n||N.rulesAutoRename.push(e)},ce=function(e,r,t){void 0===r&&(r=void 0),void 0===t&&(t=!1);var o={},i=N.options,s=i.source,l=i.ltrPrefix,c=i.rtlPrefix;T(e,["rule"],(function(e,r){if(r.directive===d.RAW&&r.option){var t=$(o),i=a.default.parse(r.option);return i.walkRules((function(e){D(e,!t&&s===n.ltr||t&&t===n.ltr?c:l)})),void e.replaceWith(i.nodes)}V(e.next()),e.remove(),L(r,o)||(o[r.directive]=r)}),(function(e){if(!U(o,d.IGNORE)){var n=e,i=$(o,r);U(o,d.RENAME)?z(n)||(N.rulesAutoRename.push(n),le(n,t,i,!0)):z(n)||le(n,t,i),ce(n,r,!0)}}))},de=function(e){var r={};T(e,["atrule","rule"],(function(e,t){L(t,r)||(r[t.directive]=t)}),(function(e){if(!U(r,d.IGNORE)&&"atrule"===e.type){var t=e;if("keyframes"!==K(t.name)){var o=$(r);ce(t,o),de(t)}}}))};function ue(e){return void 0===e&&(e={}),{postcssPlugin:"postcss-rtlcss",Once:function(r){I(e),function(e){var r=N.options,t=r.source,o=r.processUrls,i=r.useCalc,l=r.stringMap;if(r.processKeyFrames){var c={};T(e,["atrule","rule"],(function(e,r){L(r,c)||(c[r.directive]=r)}),(function(e){if(!U(c,d.IGNORE)&&"atrule"===e.type){var r=e;if("keyframes"===K(r.name)){var u=r.toString(),f=s.default.process(u,{processUrls:o,useCalc:i,stringMap:l});if(u!==f){var p=a.default.parse(f).first,b=r.params,m=b+"-"+n.ltr,g=b+"-"+n.rtl,v=$(c);r.params=!v&&t===n.ltr||v&&v===n.ltr?m:g,p.params=!v&&t===n.ltr||v&&v===n.ltr?g:m,N.keyframes.push({atRuleParams:b,atRule:r,atRuleFlipped:p})}}}})),C()}}(r),de(r),ce(r),N.rules.forEach((function(e){var r=e.rule,t=e.ruleLTR,o=e.ruleRTL,n=e.ruleBoth,i=e.ruleSafe;n&&n.nodes.length&&r.after(n),o&&o.nodes.length&&r.after(o),t&&t.nodes.length&&r.after(t),i&&i.nodes.length&&r.after(i),Y(r),X(r,t,o,n,i)})),N.keyframes.forEach((function(e){var r=e.atRule,t=e.atRuleFlipped;r.after(t),X(r,t)})),function(){if(N.rulesAutoRename.length){var e=N.options.stringMap.reduce((function(e,r){var t="string"==typeof r.search?[r.search]:r.search,o="string"==typeof r.replace?[r.replace]:r.replace;return t.forEach((function(r,t){e[r]=o[t],e[o[t]]=r})),e}),{}),r=Object.keys(e).join("|"),t=N.options.greedy?new RegExp("("+r+")","g"):new RegExp("\\b("+r+")\\b","g"),o={},n=[];N.rulesAutoRename.forEach((function(e){var r=!1;e.selectors.forEach((function(e){t.test(e)&&(o[e]=!0,r=!0),t.lastIndex=0})),r&&n.push(e)})),n.forEach((function(r){r.selectors=r.selectors.map((function(r){var n=r.replace(t,(function(r,t){return e[t]}));return N.options.autoRename!==i.strict||N.options.autoRename===i.strict&&o[n]?n:r}))}))}}()}}}ue.postcss=!0,module.exports=ue;
