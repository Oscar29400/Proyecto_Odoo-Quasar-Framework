import e from"postcss";import r from"rtlcss";var t,o,n,i=function(){return i=Object.assign||function(e){for(var r,t=1,o=arguments.length;t<o;t++)for(var n in r=arguments[t])Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n]);return e},i.apply(this,arguments)};function a(e,r,t){if(t||2===arguments.length)for(var o,n=0,i=r.length;n<i;n++)!o&&n in r||(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))}!function(e){e.combined="combined",e.override="override"}(t||(t={})),function(e){e.ltr="ltr",e.rtl="rtl"}(o||(o={})),function(e){e.disabled="disabled",e.flexible="flexible",e.strict="strict"}(n||(n={}));var s,l,c=/rtl:/,d=/rtl:ignore/,u=/^\/\*!? *rtl:?(begin|end)?:(\w+):?([^*]*?) *\*\/$/,p=/(right|left)/i,f=/^(html)(?=\W|$)/,m=/(:root)(?=\W|$)/,b=/[.?*+^$[\]\\(){}|-]/g,g=/\w$/;!function(e){e.IGNORE="ignore",e.RENAME="rename",e.SOURCE="source",e.RAW="raw"}(s||(s={})),function(e){e.BEGIN="begin",e.END="end"}(l||(l={}));var v=new RegExp("$-^"),h=[{name:"left-right",search:["left","Left","LEFT"],replace:["right","Right","RIGHT"]},{name:"ltr-rtl",search:["ltr","Ltr","LTR"],replace:["rtl","Rtl","RTL"]}],y=function(e){if(e.name)return e.name;var r=Array.isArray(e.search)?e.search[0]:e.search,t=Array.isArray(e.replace)?e.replace[0]:e.replace,o=/[^\w]/g;return r.replace(o,"-")+"-"+t.replace(o,"_")},R=function(e){return e.map((function(e){return{name:y(e),priority:100,search:e.search,replace:e.replace,options:{scope:"*",ignoreCase:!1}}}))},k=Object.keys(t).map((function(e){return t[e]})),x=Object.keys(o).map((function(e){return o[e]})),E=Object.keys(n).map((function(e){return n[e]})),w=function(e){return"string"!=typeof e&&!Array.isArray(e)||!!Array.isArray(e)&&e.some((function(e){return"string"!=typeof e}))},P=function(e,r){return"string"==typeof r?a(a([],e,!0),[r],!1):a(a([],e,!0),r,!0)},A=function(){return{mode:t.combined,ltrPrefix:'[dir="ltr"]',rtlPrefix:'[dir="rtl"]',bothPrefix:"[dir]",safeBothPrefix:!1,ignorePrefixedRules:!0,source:o.ltr,processUrls:!1,processKeyFrames:!1,processEnv:!0,useCalc:!1,stringMap:R(h),autoRename:n.disabled,greedy:!1,aliases:{}}},O={options:i({},A()),keyframes:[],keyframesStringMap:{},keyframesRegExp:v,rules:[],rulesAutoRename:[],rulesPrefixRegExp:v},M=function(e){var r,t=i({},A());(e.mode&&k.includes(e.mode)&&(t.mode=e.mode),e.source&&x.includes(e.source)&&(t.source=e.source),e.autoRename&&E.includes(e.autoRename)&&(t.autoRename=e.autoRename),"boolean"==typeof e.ignorePrefixedRules&&(t.ignorePrefixedRules=e.ignorePrefixedRules),"boolean"==typeof e.greedy&&(t.greedy=e.greedy),w(e.ltrPrefix)||(t.ltrPrefix=e.ltrPrefix),w(e.rtlPrefix)||(t.rtlPrefix=e.rtlPrefix),w(e.bothPrefix)||(t.bothPrefix=e.bothPrefix),"boolean"==typeof e.safeBothPrefix&&(t.safeBothPrefix=e.safeBothPrefix),"boolean"==typeof e.processUrls&&(t.processUrls=e.processUrls),"boolean"==typeof e.processKeyFrames&&(t.processKeyFrames=e.processKeyFrames),"boolean"==typeof e.processEnv&&(t.processEnv=e.processEnv),"boolean"==typeof e.useCalc&&(t.useCalc=e.useCalc),function(e){return!Array.isArray(e)||e.some((function(e){return typeof e.search!=typeof e.replace||w(e.search)||w(e.replace)||Array.isArray(e.search)&&Array.isArray(e.replace)&&e.search.length!==e.replace.length}))}(e.stringMap))||R(e.stringMap).forEach((function(e){e.name===h[0].name?t.stringMap.splice(0,1,e):e.name===h[1].name?t.stringMap.splice(1,1,e):t.stringMap.push(e)}));return e.aliases&&(r=e.aliases,!Object.entries(r).some((function(e){return"string"!=typeof e[1]})))&&(t.aliases=e.aliases),t},j=function(e){O.options=M(e),O.keyframes=[],O.keyframesStringMap={},O.keyframesRegExp=v,O.rules=[],O.rulesAutoRename=[],O.rulesPrefixRegExp=function(e){var r=e.ltrPrefix,t=e.rtlPrefix,o=e.bothPrefix;if(!e.ignorePrefixedRules)return v;var n=[];return n=P(n,r),n=P(n,t),n=(n=P(n,o)).map((function(e){var r=e.replace(b,"\\$&");return g.test(e)?r+"(?:\\W|$)":r})),new RegExp("("+n.join("|")+")")}(O.options)},N=function(){var e,r;O.keyframesStringMap=(e=O.keyframes,r={},e.forEach((function(e){r[e.atRuleParams]={name:e.atRule.params,nameFlipped:e.atRuleFlipped.params}})),r),O.keyframesRegExp=function(e){return new RegExp("(^|[^\\w-]| )("+Object.keys(e).join("|")+")( |[^\\w-]|$)","g")}(O.keyframesStringMap)},S=Object.values(s),I=Object.values(l),C=function(e){var r=e.toString().match(u);if(r&&function(e){return S.includes(""+e[2])&&(void 0===e[1]||I.includes(""+e[1]))}(r)){var t={directive:r[2]};return r[1]&&(t.block=r[1]),r[3]&&(t.option=r[3]),t}return null},G=function(e,r){return e.directive===s.IGNORE&&!e.block&&r[s.IGNORE]&&r[s.IGNORE].block===l.BEGIN},B=function(e,r){var t=e[r];if(t){var o=t.block;if(o!==l.BEGIN&&delete e[r],o!==l.END)return!0}return!1},F=function(e,r){var t=e[s.SOURCE],o=B(e,s.SOURCE);return t&&o?t.option:r||void 0},L=function(e,r,t,o){e.each((function(e){if("comment"===e.type||r.includes(e.type))if("comment"===e.type){var n=e,i=C(n);i&&t(n,i)}else o(e)}))},U=/^-\w+-/,$=function(e){return e.replace(U,"")},T=function(e,r){return f.test(r)?r.replace(f,"$1"+e):m.test(r)?r.replace(m,e+"$1"):e+" "+r},W=function(e,r){e.selectors="string"==typeof r?e.selectors.map((function(e){return O.rulesPrefixRegExp.test(e)?e:T(r,e)})):e.selectors.reduce((function(e,t){return e=O.rulesPrefixRegExp.test(t)?a(a([],e,!0),[t],!1):e.concat(r.map((function(e){return T(e,t)})))}),[])},K=function(e){return!!e.selectors.find((function(e){return O.rulesPrefixRegExp.test(e)}))},D=function(e){return e.some((function(e){return"decl"===e.type||"rule"===e.type&&D(e)||"atrule"===e.type&&D(e)}))},z=function(e,r,t){if(function(e){return e.some((function(e){return"decl"===e.type}))}(r)){var o;for(t=a([],t,!0);t.length;){o=t.shift();var n=e.nodes.find((function(e){if("rule"===e.type&&e.selector===o.selector)return!0}));n?o=n:(o=o.clone().removeAll(),e.append(o)),e=o}e.append(r)}},H=function(e,r,n,i,a){var s={rule:e,ruleLTR:r,ruleRTL:n,ruleBoth:i,ruleSafe:a};return function(e,r,n,i){var a=O.options,s=a.mode,l=a.ltrPrefix,c=a.rtlPrefix,d=a.bothPrefix,u=a.source;s===t.combined?(W(e,u===o.ltr?l:c),W(r,u===o.rtl?l:c)):(W(e,u===o.ltr?c:l),W(r,u===o.rtl?c:l)),W(n,d),W(i,d)}(r,n,i,a),O.rules.push(s),s},_=function(e,r,t,o,n){var i=function(e){for(var r=[];"rule"===e.type;)r.push(e),e=e.parent;return r.shift(),r.reverse()}(e),a=i.shift(),s=O.rules.find((function(e){return e.rule===a}));if(!s){var l=a.clone().removeAll(),c=l.clone(),d=l.clone(),u=l.clone();s=H(a,l,c,d,u)}!function(e,r,t,o,n,i){z(n.ruleLTR,e,i),z(n.ruleRTL,r,i),z(n.ruleBoth,t,i),z(n.ruleSafe,o,i)}(r,t,o,n,s,i)},q=function(e){e&&"rule"===e.type&&(e.raws.before="\n\n"+(e.raws.before?e.raws.before.replace(/\n/g,""):""))},J=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];e.forEach((function(e){var r=e.prev();r&&"comment"!==r.type&&q(e),e.walk((function(e){if("decl"===e.type){var r=e;r.raws&&r.raws.value&&c.test(r.raws.value.raw)&&(delete r.raws.value,r.value=r.value.trim())}}))}))},Q=function(e){D(e)?e.walkRules((function(e){Q(e),D(e)||e.remove()})):e.remove()},V={animation:{overridden:null,overrides:["animation-direction","animation-duration","animation-delay","animation-name","animation-fill-mode","animation-iteration-count","animation-play-state","animation-timing-function"]},background:{overridden:null,overrides:["background-attachment","background-clip","background-color","background-image","background-repeat","background-size"]},"background-position":{overridden:"background",overrides:["background-position-x","background-position-y"]},border:{overridden:null,overrides:[]},"border-bottom":{overridden:"border",overrides:["border-bottom-color","border-bottom-style","border-bottom-width"]},"border-left":{overridden:"border",overrides:["border-left-color","border-left-style","border-left-width"]},"border-right":{overridden:"border",overrides:["border-right-color","border-right-style","border-right-width"]},"border-top":{overridden:"border",overrides:["border-top-color","border-top-style","border-top-width"]},"border-color":{overridden:"border",overrides:["border-bottom-color","border-left-color","border-right-color","border-top-color"]},"border-style":{overridden:"border",overrides:["border-bottom-style","border-left-style","border-right-style","border-top-style"]},"border-width":{overridden:"border",overrides:["border-bottom-width","border-left-width","border-right-width","border-top-width"]},"border-radius":{overridden:null,overrides:["border-bottom-left-radius","border-bottom-right-radius","border-top-left-radius","border-top-right-radius"]},margin:{overridden:null,overrides:["margin-bottom","margin-left","margin-top","margin-right"]},padding:{overridden:null,overrides:["padding-bottom","padding-left","padding-top","padding-right"]},transition:{overridden:null,overrides:["transition-delay","transition-duration","transition-property","transition-timing-function"]}},X=["box-shadow","clear","cursor","direction","float","left","right","text-align","text-align-last","text-shadow","transform","transform-origin"],Y={0:["border-bottom-right-radius","border-bottom-left-radius","border-end-end-radius","border-end-start-radius","border-start-end-radius","border-start-start-radius","border-top-left-radius","border-top-right-radius","margin-block-end","margin-block-start","margin-top","margin-right","margin-bottom","margin-left","margin-inline-end","margin-inline-start","padding-block-end","padding-block-start","padding-top","padding-right","padding-bottom","padding-left","padding-inline-end","padding-inline-start","scroll-margin-block-end","scroll-margin-block-start","scroll-margin-top","scroll-margin-right","scroll-margin-bottom","scroll-margin-left","scroll-margin-inline-end","scroll-margin-inline-start"],auto:["top","right","bottom","left","grid-column-end","grid-column-start","grid-row-end","grid-row-start","inset-block-end","inset-block-start","inset-inline-end","inset-inline-start","scroll-padding-block-end","scroll-padding-block-start","scroll-padding-top","scroll-padding-right","scroll-padding-bottom","scroll-padding-left","scroll-padding-inline-end","scroll-padding-inline-start"],currentcolor:["border-block-start-color","border-block-end-color","border-top-color","border-right-color","border-bottom-color","border-left-color","border-inline-start-color","border-inline-end-color"],medium:["border-block-start-width","border-block-end-width","border-top-width","border-right-width","border-bottom-width","border-left-width","border-inline-start-width","border-inline-end-width"],none:["border-block-start","border-block-end","border-top","border-right","border-bottom","border-left","border-top-style","border-right-style","border-bottom-style","border-left-style","border-block-start-style","border-block-end-style","border-inline-start","border-inline-end","border-inline-start-style","border-inline-end-style"]},Z={},ee={},re={},te=function(e){var r=V[e].overridden;return r?[r].concat(te(r)):[]};Object.keys(V).forEach((function(e){var r=te(e);Z[e]=r,V[e].overrides.forEach((function(t){Z[t]=[e].concat(r)}))})),Object.assign(ee,Z),X.forEach((function(e){ee[e]=[]})),Object.keys(Y).forEach((function(e){Y[e].forEach((function(r){re[r]=e}))}));var oe=function(e,r){var t=e.clone(),o=e.prev();if(o&&"comment"===o.type){var n=o.clone();r.append(n),o.remove()}r.append(t)},ne=function(e){var r=!!e.raws&&!!e.raws.value&&e.raws.value.raw;return!(!r||!d.test(r))},ie=function(o,i,a,l){void 0===l&&(l=!1);var c=O.options,d=c.mode,u=c.source,f=c.safeBothPrefix,m=c.processUrls,b=c.processEnv,g=c.useCalc,v=c.stringMap,h=c.autoRename,y=c.greedy,R=c.aliases,k=[],x=o.clone().removeAll(),E=x.clone(),w=x.clone(),P=x.clone(),A=Array.prototype.reduce.call(o.nodes,(function(e,r){if("decl"===r.type){var t=r;e[t.prop]=t.value.trim()}return e}),{}),M=[],j=!1,N={};L(o,["decl"],(function(r,o){if(q(r.next()),r.remove(),o.directive===s.RAW&&o.option){var n=F(N,a),i=e.parse(o.option);d===t.combined&&!n||n&&(d===t.combined&&n===u||d!==t.combined&&n!==u)?E.append(i.nodes):x.append(i.nodes)}G(o,N)||(N[o.directive]=o)}),(function(o){if(!B(N,s.IGNORE)){var i=B(N,s.RENAME),l=o,c=l.toString()+";",S=r.process(c,{processUrls:m||i,processEnv:b,useCalc:g,stringMap:v,autoRename:h!==n.disabled,autoRenameStrict:h===n.strict,greedy:y,aliases:R}),I=e.parse(S).first;I.source=l.source,I.raws=l.raws;var C=l.prop.trim(),G=$(C),L=l.value.trim(),U="animation"===G||"animation-name"===G,T=I.prop.trim(),W=I.value.trim(),K=Z[G],D=M.includes(G)||!!K&&K.some((function(e){return M.indexOf(e)>=0})),z=function(e,r){return r.some((function(r){return Z[r]&&Z[r].includes(e)}))}(G,M),H=!!f&&!!ee[G],_=F(N,a),q=!_||_===u;if(C!==T||L!==W||D||z||H||U)if(U)if(C!==T||L!==W||0!==O.keyframes.length&&O.keyframesRegExp.test(L)){var J=l.value.replace(O.keyframesRegExp,(function(e,r,t,o){return r+O.keyframesStringMap[t].name+o})),Q=l.value.replace(O.keyframesRegExp,(function(e,r,t,o){return r+O.keyframesStringMap[t].nameFlipped+o})),V=l.clone();if(d===t.combined)(X=l.clone()).value=J,V.value=Q,q?(x.append(X),E.append(V)):(x.append(V),E.append(X)),k.push(l);else l.value=J,V.value=Q,q?x.append(V):E.append(V),f&&(oe(l,P),k.push(l))}else f&&!ne(l)&&(oe(l,P),k.push(l));else{if(C===T&&L===W)return void((D||H||z)&&!ne(l)&&(oe(l,D||z?w:P),k.push(l)));if(A[I.prop]===W)return j=!0,void(H&&!ne(l)&&(oe(l,P),k.push(l)));if(d===t.combined)q?(oe(l,x),E.append(I)):(oe(l,E),x.append(I)),k.push(l);else{var X;if(p.test(l.prop)&&!A[I.prop])(X=l.clone()).value=re[l.prop]||"unset",q?x.append(X):E.append(X);H&&!ne(l)&&(oe(l,P),k.push(l)),q?x.append(I):E.append(I)}M.push(G)}}})),k.length&&k.forEach((function(e){return e.remove()})),x.nodes.length||E.nodes.length||w.nodes.length||P.nodes.length?i?_(o,x,E,w,P):H(o,x,E,w,P):h===n.disabled||j||l||O.rulesAutoRename.push(o)},ae=function(r,t,n){void 0===t&&(t=void 0),void 0===n&&(n=!1);var i={},a=O.options,l=a.source,c=a.ltrPrefix,d=a.rtlPrefix;L(r,["rule"],(function(r,t){if(t.directive===s.RAW&&t.option){var n=F(i),a=e.parse(t.option);return a.walkRules((function(e){W(e,!n&&l===o.ltr||n&&n===o.ltr?d:c)})),void r.replaceWith(a.nodes)}q(r.next()),r.remove(),G(t,i)||(i[t.directive]=t)}),(function(e){if(!B(i,s.IGNORE)){var r=e,o=F(i,t);B(i,s.RENAME)?K(r)||(O.rulesAutoRename.push(r),ie(r,n,o,!0)):K(r)||ie(r,n,o),ae(r,t,!0)}}))},se=function(e){var r={};L(e,["atrule","rule"],(function(e,t){G(t,r)||(r[t.directive]=t)}),(function(e){if(!B(r,s.IGNORE)&&"atrule"===e.type){var t=e;if("keyframes"!==$(t.name)){var o=F(r);ae(t,o),se(t)}}}))};function le(t){return void 0===t&&(t={}),{postcssPlugin:"postcss-rtlcss",Once:function(i){j(t),function(t){var n=O.options,i=n.source,a=n.processUrls,l=n.useCalc,c=n.stringMap;if(n.processKeyFrames){var d={};L(t,["atrule","rule"],(function(e,r){G(r,d)||(d[r.directive]=r)}),(function(t){if(!B(d,s.IGNORE)&&"atrule"===t.type){var n=t;if("keyframes"===$(n.name)){var u=n.toString(),p=r.process(u,{processUrls:a,useCalc:l,stringMap:c});if(u!==p){var f=e.parse(p).first,m=n.params,b=m+"-"+o.ltr,g=m+"-"+o.rtl,v=F(d);n.params=!v&&i===o.ltr||v&&v===o.ltr?b:g,f.params=!v&&i===o.ltr||v&&v===o.ltr?g:b,O.keyframes.push({atRuleParams:m,atRule:n,atRuleFlipped:f})}}}})),N()}}(i),se(i),ae(i),O.rules.forEach((function(e){var r=e.rule,t=e.ruleLTR,o=e.ruleRTL,n=e.ruleBoth,i=e.ruleSafe;n&&n.nodes.length&&r.after(n),o&&o.nodes.length&&r.after(o),t&&t.nodes.length&&r.after(t),i&&i.nodes.length&&r.after(i),Q(r),J(r,t,o,n,i)})),O.keyframes.forEach((function(e){var r=e.atRule,t=e.atRuleFlipped;r.after(t),J(r,t)})),function(){if(O.rulesAutoRename.length){var e=O.options.stringMap.reduce((function(e,r){var t="string"==typeof r.search?[r.search]:r.search,o="string"==typeof r.replace?[r.replace]:r.replace;return t.forEach((function(r,t){e[r]=o[t],e[o[t]]=r})),e}),{}),r=Object.keys(e).join("|"),t=O.options.greedy?new RegExp("("+r+")","g"):new RegExp("\\b("+r+")\\b","g"),o={},i=[];O.rulesAutoRename.forEach((function(e){var r=!1;e.selectors.forEach((function(e){t.test(e)&&(o[e]=!0,r=!0),t.lastIndex=0})),r&&i.push(e)})),i.forEach((function(r){r.selectors=r.selectors.map((function(r){var i=r.replace(t,(function(r,t){return e[t]}));return O.options.autoRename!==n.strict||O.options.autoRename===n.strict&&o[i]?i:r}))}))}}()}}}le.postcss=!0;export{le as default};
